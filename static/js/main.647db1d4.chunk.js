(this.webpackJsonpvlab=this.webpackJsonpvlab||[]).push([[0],{26:function(e,t,n){},42:function(e,t,n){e.exports=n(65)},47:function(e,t,n){},54:function(e,t){},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t){},63:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(15),r=n.n(i),l=(n(47),n(21)),c=n.n(l),s=n(27),d=n(28),u=n(29),m=n(41),f=n(39),v=n(9),h=n.n(v),g=n(31),p=n(16);function b(){return o.a.createElement("div",null,o.a.createElement(p.a,{variant:"primary",disabled:!0},o.a.createElement(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading Model..."))}var y=n(71),w=n(19),x=(n(26),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).videoRef=o.a.createRef(),e.canvasRef=o.a.createRef(),e.state={loading:!0,model_loaded:!0},e.styles={position:"fixed",borderRadius:"5px",boxShadow:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)"},e.detectFromVideoFrame=function(t,n){t.predict(n,{scoreThreshold:.2}).then((function(a){e.showDetections(a),requestAnimationFrame((function(){e.detectFromVideoFrame(t,n)}))}),(function(e){console.log("Couldn't start the webcam"),console.error(e)}))},e.showDetections=function(t){var n=e.canvasRef.current.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height);var a="24px helvetica";n.font=a,n.textBaseline="top",t.forEach((function(e){console.log(e);var t=e.left,o=e.top,i=e.right-e.left,r=e.bottom-e.top;n.strokeStyle="#b86b77",n.lineWidth=1,n.strokeRect(t,o,i,r),n.fillStyle="#b86b77";var l=n.measureText(e.class).width,c=parseInt(a,5);n.fillRect(t,o,l+5,c+5),n.fillRect(t,o+r-c,l+5,c+5),n.fillStyle="#000000",n.fillText(e.class,t,o),n.fillText(e.score.toFixed(2),t,o+r-c)}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia){var t=navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise((function(t){e.videoRef.current.onloadedmetadata=function(){t()}}))}),(function(e){console.log("Couldn't start the webcam"),console.error(e)})),n=h.a.v3tiny();Promise.all([n,t]).then((function(t){e.setState({model_loaded:!0,loading:!1}),e.model=t[0],e.detectFromVideoFrame(t[0],e.videoRef.current)})).catch((function(e){console.error(e)}))}}},{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.model&&this.model.dispose(),this.setState({loading:!0}),"v3"!==t){e.next=8;break}return console.log("Tiny Yolo-v3 "),e.next=6,h.a.v3tiny();case 6:this.model=e.sent,this.setState({loading:!0});case 8:if("v2"!==t){e.next=14;break}return console.log("Tiny Yolo-v2 "),e.next=12,h.a.v2tiny();case 12:this.model=e.sent,this.setState({loading:!0});case 14:if("v1"!==t){e.next=20;break}return console.log("Tiny Yolo-v1 "),e.next=18,h.a.v1tiny();case 18:this.model=e.sent,this.setState({loading:!0});case 20:if("yolo"!==t){e.next=26;break}return console.log("Yolo-v3 "),e.next=24,h.a.v3();case 24:this.model=e.sent,this.setState({loading:!0});case 26:console.log("Model loaded"),this.setState({model_loaded:!0,loading:!1}),this.detectFromVideoFrame(this.model,this.videoRef.current);case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement(y.a,{variant:"dark",id:"dropdown-basic-button",title:"Model Type"},o.a.createElement(w.a.Item,{onClick:function(){e.load("yolo")}},"YOLOv3 (236MB)"),o.a.createElement(w.a.Item,{onClick:function(){e.load("v1")}},"Tiny YOLOv1 (60MB)"),o.a.createElement(w.a.Item,{onClick:function(){e.load("v2")}},"Tiny YOLOv2 (43MB)"),o.a.createElement(w.a.Item,{onClick:function(){e.load("v3")}},"Tiny YOLOv3 (34MB)"))),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement("video",{style:this.styles,autoPlay:!0,muted:!0,ref:this.videoRef,width:"720",height:"500"}),o.a.createElement("canvas",{style:this.styles,ref:this.canvasRef,width:"720",height:"500"}),this.state.loading?o.a.createElement(b,null):null))}}]),n}(a.Component));n(63),n(64);var E=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.647db1d4.chunk.js.map